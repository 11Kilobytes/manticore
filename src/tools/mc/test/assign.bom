module Assign

  fun doit (i : int / exh : cont(any)) : int =
      fun h (x : int / exh : cont(any)) : int = return (999)
      let cell : ![int,fun (int / cont(any) -> int)] = alloc (0,h)
      fun f (x : int / exh : cont(any)) : int = return (#0(cell))
      if I32Eq (i,0)
         then do #0(cell) := 2
	      do #1(cell) := f
              (* let g : fun (int / cont(any) -> int) = #1(cell) *)
              let x : int = apply f (i / exh)
              return (x)
         else return (1)
