(* get-work1.hlop
 *
 * COPYRIGHT (c) 2007 The Manticore Project (http://manticore.cs.uchicago.edu)
 * All rights reserved.
 *)

#include "types.def"

define inline @getWork1 () : () =
  let w : any = apply @deq ()
  case w
    of SOME(fut : ![any, any]) => apply @steal1 fut
     | NONE => apply @getWork1 ([] (* / exh *))
(*
  while (1) {
    case deq()
      of NONE => ()
       | SOME fut => steal1 fut
  } 
*)
;
