
f=$1 

base=${f%.pml}

shift

sed -i '.bak' "s/structure WhichSTM = [a-z|A-Z]*/structure WhichSTM = FullAbortSTM/g" $f

pmlc $@ -o fullAbort $f 

sed -i '.bak' "s/structure WhichSTM = [a-z|A-Z]*/structure WhichSTM = PartialSTM/g" $f

pmlc $@ -o partialAbort $f

sed -i '.bak' "s/structure WhichSTM = [a-z|A-Z]*/structure WhichSTM = HybridPartialSTM/g" $f

pmlc $@ -o hybridPartialAbort $f

sed -i '.bak' "s/structure WhichSTM = [a-z|A-Z]*/structure WhichSTM = BoundedHybridPartialSTM/g" $f

pmlc $@ -o boundedHybridPartialAbort $f

